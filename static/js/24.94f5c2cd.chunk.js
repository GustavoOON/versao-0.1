(this["webpackJsonpoon-seguros"]=this["webpackJsonpoon-seguros"]||[]).push([[24],{578:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(111),r=n.n(c),a=function(){var e=r.a.get("TokenID");return{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}};t.b="http://dashboardbff.oonpayperuse.com.br"},604:function(e,t,n){"use strict";var c=n(582),r=n(111),a=n.n(r),s=n(411);t.a={UserTypeDecryption:function(){var e=a.a.get("userType");return s.AES.decrypt(e,"OnnSeguros").toString(s.enc.Utf8)},userPermissionsDescription:function(){var e,t,n=[],r=a.a.get("permissions").split(","),i=Object(c.a)(r);try{for(i.s();!(t=i.n()).done;){e=t.value;var o=s.AES.decrypt(e,"OnnSeguros");n.push(o.toString(s.enc.Utf8))}}catch(l){i.e(l)}finally{i.f()}return n}}},669:function(e,t){},753:function(e,t,n){},759:function(e,t){},760:function(e,t){},798:function(e,t,n){"use strict";n.r(t);var c=n(53),r=n(0),a=n(579),s=n.n(a),i=(n(753),n(7)),o=(n(49),n(600)),l=n(776),j=n(754),b=(n(111),n(578)),u=n(2),h=function(e){var t=function(){return x(!1)},n=Object(r.useState)(!1),a=Object(c.a)(n,2),h=(a[0],a[1],Object(r.useState)(!1)),d=Object(c.a)(h,2),O=d[0],x=d[1],p=function(){console.log(A);var e=new FileReader;e.onload=function(e){var t=e.target.result,n=j.read(t,{type:"binary"}),c=n.SheetNames[0],r=n.Sheets[c],a=j.utils.sheet_to_csv(r,{header:1});f(a)},e.readAsBinaryString(A)},f=function(t){for(var n=t.split(/\r\n|\n/),c=n[0].split(/,(?![^"]*"(?:(?:[^"]*"){2})*[^"]*$)/),r=[],a=1;a<n.length;a++){var i=n[a].split(/,(?![^"]*"(?:(?:[^"]*"){2})*[^"]*$)/);if(c&&i.length==c.length){for(var o={},l=0;l<c.length;l++){var j=i[l];j.length>0&&('"'==j[0]&&(j=j.substring(1,j.length-1)),'"'==j[j.length-1]&&(j=j.substring(j.length-2,1))),c[l]&&(o[c[l]]=j)}Object.values(o).filter((function(e){return e})).length>0&&r.push(o)}}var u=c.map((function(e){return{name:e,selector:e}}));N(r),m(u),function(t){D(!0);var n=[];t.forEach((function(e){var t=e[" to"].replace(/[^0-9,]/g,""),c=e[" until"].replace(/[^0-9,]/g,"");n.push({to:Number(t.replace(",",".")),until:Number(c.replace(",",".")),kRisk:Number(e.kRisk.replace(",",".")),exposition:Number(e.exposition.replace(",","."))})})),console.log("valores atts",n);var c=Object(b.a)();s.a.post("".concat(b.b,"/risks"),n,c).then((function(t){console.log("Enviado...",t),w(),D(!1),e.parentCallback(!0),x(!1)})).catch((function(e){console.log("erro na api....",e)}))}(r)};var g=Object(r.useState)([]),v=Object(c.a)(g,2),m=(v[0],v[1]),S=Object(r.useState)([]),k=Object(c.a)(S,2),N=(k[0],k[1]),y=Object(r.useState)(),C=Object(c.a)(y,2),A=C[0],w=C[1],T=Object(r.useState)(!1),R=Object(c.a)(T,2),U=R[0],D=R[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(i.g,{onClick:function(){return x(!0)},color:"dark",children:"Atualizar valores"}),Object(u.jsxs)(i.K,{visible:O,onClose:t,size:"xl",className:"container-btn-risc",children:[Object(u.jsxs)(i.L,{children:[Object(u.jsx)("h3",{children:"Atualizar planilha "}),Object(u.jsx)("br",{}),Object(u.jsx)("p",{children:"Atualizar valores de risco por meio de uma planilha .CSV."}),Object(u.jsx)(i.G,{className:"mb-3",children:Object(u.jsx)(i.w,{type:"file",accept:".csv",required:!0,onChange:function(e){w(e.target.files[0])}})}),null==A?Object(u.jsx)(l.a,{variant:"secondary",onClick:p,children:"Salvar"}):null,null!=A&&0==U?Object(u.jsx)(l.a,{variant:"secondary",onClick:p,children:"Salvar"}):null,null!=A&&0!=U?Object(u.jsxs)("h4",{children:[" ",Object(u.jsx)(o.a,{animation:"grow",variant:"info"}),"  "]}):null]}),Object(u.jsx)(i.M,{children:Object(u.jsx)(l.a,{variant:"secondary",onClick:t,children:"Sair"})})]})]})},d=n(604);n(411),t.default=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],a=t[1],l=Object(r.useState)([]),j=Object(c.a)(l,2),O=(j[0],j[1]),x=Object(r.useState)([]),p=Object(c.a)(x,2),f=p[0],g=p[1];return Object(r.useEffect)((function(){O(d.a.userPermissionsDescription()),g(d.a.UserTypeDecryption);var e=Object(b.a)();s.a.get("".concat(b.b,"/risks"),e).then((function(e){a(e.data)})).catch((function(e){}))}),[]),console.log(n),""==n?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("h4",{children:[" ",Object(u.jsx)(o.a,{animation:"grow",variant:"info"}),"  "]}),Object(u.jsx)("br",{})]}):Object(u.jsx)("div",{children:Object(u.jsx)(i.i,{className:"container-risco",children:Object(u.jsxs)(i.j,{children:[Object(u.jsx)(i.S,{expand:"lg",className:"menuUser",children:Object(u.jsxs)(i.o,{fluid:!0,children:[Object(u.jsx)(i.V,{"aria-label":"Toggle navigation"}),Object(u.jsxs)(i.n,{className:"navbar-collapse",children:[Object(u.jsxs)(i.T,{children:[" ",Object(u.jsx)("h4",{children:" Riscos "}),"   "]}),Object(u.jsx)(i.U,{className:"me-auto mb-2 mb-lg-0"}),"ADMIN"==f?Object(u.jsx)(h,{parentCallback:function(){a([]);var e=Object(b.a)();s.a.get("".concat(b.b,"/risks"),e).then((function(e){a(e.data)})).catch((function(e){console.log("error",e),alert("Login expirado"),window.location.reload()}))}}):null]})]})}),Object(u.jsxs)(i.gb,{align:"middle",className:" container-table-risc ",bordered:!0,hover:!0,responsive:!0,children:[Object(u.jsx)(i.jb,{children:Object(u.jsxs)(i.lb,{active:!0,children:[Object(u.jsx)(i.kb,{className:"text-center",children:"Valor Min\xedmo do ve\xedculo"}),Object(u.jsx)(i.kb,{className:"text-center",children:"Valor m\xe1ximo  do Ve\xedculo"}),Object(u.jsx)(i.kb,{className:"text-center",children:"Constante de Risco"}),Object(u.jsx)(i.kb,{className:"text-center",children:" Var\xedavel de exposi\xe7\xe3o "})]})}),Object(u.jsx)(i.hb,{children:n.map((function(e,t){return Object(u.jsxs)(i.lb,{children:[Object(u.jsx)(i.ib,{className:"valorMin",children:Object(u.jsxs)("p",{children:[" R$ ",e.to," "]})}),Object(u.jsx)(i.ib,{color:"secondary",className:"text-center",children:Object(u.jsxs)("p",{children:[" R$ ",e.until," "]})}),Object(u.jsx)(i.ib,{className:"text-center",children:Object(u.jsxs)("p",{children:[" ",e.krisk," "]})}),Object(u.jsx)(i.ib,{color:"secondary",className:"text-center",children:Object(u.jsxs)("p",{children:[" ",e.exposition," "]})})]},t.toString())}))})]}),Object(u.jsx)("br",{})]})})})}}}]);
//# sourceMappingURL=24.94f5c2cd.chunk.js.map