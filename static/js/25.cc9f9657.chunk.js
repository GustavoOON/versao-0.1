(this["webpackJsonpoon-seguros"]=this["webpackJsonpoon-seguros"]||[]).push([[25],{559:function(e,t,n){"use strict";t.a="http://dashboardbff.oonpayperuse.com.br"},567:function(e,t,n){"use strict";var a=n(563),c=n(557),r=n.n(c),s=n(561);t.a={UserTypeDecryption:function(){var e=r.a.get("userType");return s.AES.decrypt(e,"OnnSeguros").toString(s.enc.Utf8)},userPermissionsDescription:function(){var e,t,n=[],c=r.a.get("permissions").split(","),i=Object(a.a)(c);try{for(i.s();!(t=i.n()).done;){e=t.value;var o=s.AES.decrypt(e,"OnnSeguros");n.push(o.toString(s.enc.Utf8))}}catch(l){i.e(l)}finally{i.f()}return n}}},630:function(e,t){},731:function(e,t,n){},737:function(e,t){},738:function(e,t){},768:function(e,t,n){"use strict";n.r(t);var a=n(158),c=n(2),r=n(401),s=n.n(r),i=(n(731),n(551)),o=(n(553),n(580)),l=n(161),j=n(753),b=n(588),u=n(732),h=n(557),d=n.n(h),O=n(559),p=n(27),f=function(e){var t,n=function(){return v(!1)},r=Object(c.useState)(!1),h=Object(a.a)(r,2),f=(h[0],h[1],Object(c.useState)(!1)),x=Object(a.a)(f,2),g=x[0],v=x[1],m=d.a.get("TokenID"),S=(d.a.get("userType"),{headers:{Authorization:"Bearer ".concat(m),"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}),y=function(){console.log(E);var e=new FileReader;e.onload=function(e){var t=e.target.result,n=u.read(t,{type:"binary"}),a=n.SheetNames[0],c=n.Sheets[a],r=u.utils.sheet_to_csv(c,{header:1});k(r)},e.readAsBinaryString(E)},k=function(t){for(var n=t.split(/\r\n|\n/),a=n[0].split(/,(?![^"]*"(?:(?:[^"]*"){2})*[^"]*$)/),c=[],r=1;r<n.length;r++){var i=n[r].split(/,(?![^"]*"(?:(?:[^"]*"){2})*[^"]*$)/);if(a&&i.length==a.length){for(var o={},l=0;l<a.length;l++){var j=i[l];j.length>0&&('"'==j[0]&&(j=j.substring(1,j.length-1)),'"'==j[j.length-1]&&(j=j.substring(j.length-2,1))),a[l]&&(o[a[l]]=j)}Object.values(o).filter((function(e){return e})).length>0&&c.push(o)}}var b=a.map((function(e){return{name:e,selector:e}}));D(c),N(b),function(t){I(!0);var n=[];t.forEach((function(e){var t=e.to.replace(/[^0-9,]/g,""),a=e.until.replace(/[^0-9,]/g,"");n.push({to:t.replace(",","."),until:a.replace(",","."),kRisk:e.kRisk.replace(",","."),exposition:e.exposition.replace(",",".")})})),console.log("valores atts",n),s.a.post("".concat(O.a,"/plansService/risks"),n,S).then((function(t){console.log("Enviado...",t),F(),I(!1),e.parentCallback(!0),v(!1)})).catch((function(e){console.log("erro na api....",e)}))}(c)};var A=Object(c.useState)([]),C=Object(a.a)(A,2),N=(C[0],C[1]),T=Object(c.useState)([]),w=Object(a.a)(T,2),D=(w[0],w[1]),z=Object(c.useState)(),U=Object(a.a)(z,2),E=U[0],F=U[1],R=Object(c.useState)(!1),V=Object(a.a)(R,2),B=V[0],I=V[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(i.c,{disabled:!0,onClick:function(){return v(!0)},color:"dark",children:"Atualizar valores"}),Object(p.jsxs)(j.a,{show:g,onHide:n,size:"xl",className:"container-btn-risc",children:[Object(p.jsxs)(j.a.Body,{children:[Object(p.jsx)("h3",{children:"Atualizar planilha "}),Object(p.jsx)("br",{}),Object(p.jsx)("p",{children:"Atualizar valores de risco por meio de uma planilha .CSV."}),Object(p.jsx)(i.E,{className:"mb-3",children:Object(p.jsx)(i.u,{type:"file",accept:".csv",required:!0,onChange:function(e){F(e.target.files[0])}})}),null==E?Object(p.jsx)(b.a,(t={variant:"secondary",disabled:!0},Object(l.a)(t,"variant","ghost"),Object(l.a)(t,"onClick",y),Object(l.a)(t,"children","Salvar"),t)):null,null!=E&&0==B?Object(p.jsx)(b.a,{variant:"secondary",onClick:y,children:"Salvar"}):null,null!=E&&0!=B?Object(p.jsxs)("h4",{children:[" ",Object(p.jsx)(o.a,{animation:"grow",variant:"info"}),"  "]}):null]}),Object(p.jsx)(j.a.Footer,{children:Object(p.jsx)(b.a,{variant:"secondary",onClick:n,children:"Sair"})})]})]})},x=n(567);n(561),t.default=function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],l=Object(c.useState)([]),j=Object(a.a)(l,2),b=(j[0],j[1]),u=Object(c.useState)([]),h=Object(a.a)(u,2),g=h[0],v=h[1],m=d.a.get("TokenID"),S={headers:{Authorization:"Bearer ".concat(m),"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}};return Object(c.useEffect)((function(){b(x.a.userPermissionsDescription()),v(x.a.UserTypeDecryption),s.a.get("".concat(O.a,"/risks"),S).then((function(e){r(e.data)})).catch((function(e){}))}),[]),""==n?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("h4",{children:[" ",Object(p.jsx)(o.a,{animation:"grow",variant:"info"}),"  "]}),Object(p.jsx)("br",{}),Object(p.jsx)("h3",{children:" Dashboard-bff desatualizada "})]}):Object(p.jsx)("div",{children:Object(p.jsx)(i.e,{className:"container-risco",children:Object(p.jsxs)(i.f,{children:[Object(p.jsx)(i.I,{expand:"lg",className:"menuUser",children:Object(p.jsxs)(i.l,{fluid:!0,children:[Object(p.jsx)(i.L,{"aria-label":"Toggle navigation"}),Object(p.jsxs)(i.k,{className:"navbar-collapse",children:[Object(p.jsxs)(i.J,{children:[" ",Object(p.jsx)("h4",{children:" Riscos "}),"   "]}),Object(p.jsx)(i.K,{className:"me-auto mb-2 mb-lg-0"}),"ADMIN"==g?Object(p.jsx)(f,{parentCallback:function(){r([]),s.a.get("".concat(O.a,"/risks"),S).then((function(e){r(e.data)})).catch((function(e){console.log("error",e),alert("Login expirado"),window.location.reload()}))}}):null]})]})}),Object(p.jsxs)(i.W,{align:"middle",className:" container-table-risc ",bordered:!0,hover:!0,responsive:!0,children:[Object(p.jsx)(i.Z,{children:Object(p.jsxs)(i.bb,{active:!0,children:[Object(p.jsx)(i.ab,{className:"text-center",children:"Valor Min\xedmo do ve\xedculo"}),Object(p.jsx)(i.ab,{className:"text-center",children:"Valor m\xe1ximo  do Ve\xedculo"}),Object(p.jsx)(i.ab,{className:"text-center",children:"Constante de Risco"}),Object(p.jsx)(i.ab,{className:"text-center",children:" Var\xedavel de exposi\xe7\xe3o "})]})}),Object(p.jsx)(i.X,{})]}),Object(p.jsx)("br",{})]})})})}}}]);
//# sourceMappingURL=25.cc9f9657.chunk.js.map