(this["webpackJsonpoon-seguros"]=this["webpackJsonpoon-seguros"]||[]).push([[25],{559:function(e,t,c){"use strict";t.a="http://dashboardbff.oonpayperuse.com.br"},630:function(e,t){},732:function(e,t,c){},738:function(e,t){},739:function(e,t){},775:function(e,t,c){"use strict";c.r(t);var n=c(158),a=c(2),s=c(160),r=c.n(s),o=(c(732),c(551)),l=(c(554),c(575)),i=c(162),j=c(760),b=c(579),d=c(733),h=c(558),u=c.n(h),O=c(559),x=c(27),p=function(e){var t,c=function(){return v(!1)},s=Object(a.useState)(!1),h=Object(n.a)(s,2),p=(h[0],h[1],Object(a.useState)(!1)),g=Object(n.a)(p,2),f=g[0],v=g[1],m=u.a.get("TokenID"),k=(u.a.get("userType"),{headers:{Authorization:"Bearer ".concat(m),"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}),N=function(){console.log(V);var e=new FileReader;e.onload=function(e){var t=e.target.result,c=d.read(t,{type:"binary"}),n=c.SheetNames[0],a=c.Sheets[n],s=d.utils.sheet_to_csv(a,{header:1});y(s)},e.readAsBinaryString(V)},y=function(t){for(var c=t.split(/\r\n|\n/),n=c[0].split(/,(?![^"]*"(?:(?:[^"]*"){2})*[^"]*$)/),a=[],s=1;s<c.length;s++){var o=c[s].split(/,(?![^"]*"(?:(?:[^"]*"){2})*[^"]*$)/);if(n&&o.length==n.length){for(var l={},i=0;i<n.length;i++){var j=o[i];j.length>0&&('"'==j[0]&&(j=j.substring(1,j.length-1)),'"'==j[j.length-1]&&(j=j.substring(j.length-2,1))),n[i]&&(l[n[i]]=j)}Object.values(l).filter((function(e){return e})).length>0&&a.push(l)}}var b=n.map((function(e){return{name:e,selector:e}}));R(a),w(b),function(t){D(!0);var c=[];t.forEach((function(e){var t=e.to.replace(/[^0-9,]/g,""),n=e.until.replace(/[^0-9,]/g,"");c.push({to:t.replace(",","."),until:n.replace(",","."),kRisk:e.kRisk.replace(",","."),exposition:e.exposition.replace(",",".")})})),console.log("valores atts",c),r.a.post("".concat(O.a,"/plansService/risks"),c,k).then((function(t){console.log("Enviado...",t),B(),D(!1),e.parentCallback(!0),v(!1)})).catch((function(e){console.log("erro na api....",e)}))}(a)};var S=Object(a.useState)([]),C=Object(n.a)(S,2),w=(C[0],C[1]),A=Object(a.useState)([]),T=Object(n.a)(A,2),R=(T[0],T[1]),z=Object(a.useState)(),F=Object(n.a)(z,2),V=F[0],B=F[1],M=Object(a.useState)(!1),Z=Object(n.a)(M,2),$=Z[0],D=Z[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(o.c,{disabled:!0,onClick:function(){return v(!0)},color:"dark",children:"Atualizar valores"}),Object(x.jsxs)(j.a,{show:f,onHide:c,size:"xl",className:"container-btn-risc",children:[Object(x.jsxs)(j.a.Body,{children:[Object(x.jsx)("h3",{children:"Atualizar planilha "}),Object(x.jsx)("br",{}),Object(x.jsx)("p",{children:"Atualizar valores de risco por meio de uma planilha .CSV."}),Object(x.jsx)(o.F,{className:"mb-3",children:Object(x.jsx)(o.v,{type:"file",accept:".csv",required:!0,onChange:function(e){B(e.target.files[0])}})}),null==V?Object(x.jsx)(b.a,(t={variant:"secondary",disabled:!0},Object(i.a)(t,"variant","ghost"),Object(i.a)(t,"onClick",N),Object(i.a)(t,"children","Salvar"),t)):null,null!=V&&0==$?Object(x.jsx)(b.a,{variant:"secondary",onClick:N,children:"Salvar"}):null,null!=V&&0!=$?Object(x.jsxs)("h4",{children:[" ",Object(x.jsx)(l.a,{animation:"grow",variant:"info"}),"  "]}):null]}),Object(x.jsx)(j.a.Footer,{children:Object(x.jsx)(b.a,{variant:"secondary",onClick:c,children:"Sair"})})]})]})};t.default=function(){var e=Object(a.useState)([]),t=Object(n.a)(e,2),c=t[0],s=t[1],i=u.a.get("TokenID"),j=u.a.get("userType"),b={headers:{Authorization:"Bearer ".concat(i),"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}};return Object(a.useEffect)((function(){console.log("mostra aqui ",O.a),console.log(i),r.a.get("".concat(O.a,"/risks"),b).then((function(e){s(e.data)})).catch((function(e){console.log("error",e),alert("Login expirados"),window.location.reload()}))}),[]),""==c?Object(x.jsxs)("h4",{children:[" ",Object(x.jsx)(l.a,{animation:"grow",variant:"info"}),"  "]}):Object(x.jsx)("div",{children:Object(x.jsx)(o.e,{className:"container-risco",children:Object(x.jsxs)(o.f,{children:[Object(x.jsx)(o.J,{expand:"lg",className:"menuUser",children:Object(x.jsxs)(o.l,{fluid:!0,children:[Object(x.jsx)(o.M,{"aria-label":"Toggle navigation"}),Object(x.jsxs)(o.k,{className:"navbar-collapse",children:[Object(x.jsxs)(o.K,{children:[" ",Object(x.jsx)("h4",{children:" Riscos "}),"   "]}),Object(x.jsx)(o.L,{className:"me-auto mb-2 mb-lg-0"}),"ADMIN"==j?Object(x.jsx)(p,{parentCallback:function(){s([]),r.a.get("".concat(O.a,"/risks"),b).then((function(e){s(e.data)})).catch((function(e){console.log("error",e),alert("Login expirado"),window.location.reload()}))}}):null]})]})}),Object(x.jsxs)(o.X,{align:"middle",className:" container-table-risc ",bordered:!0,hover:!0,responsive:!0,children:[Object(x.jsx)(o.ab,{children:Object(x.jsxs)(o.cb,{active:!0,children:[Object(x.jsx)(o.bb,{className:"text-center",children:"Valor Min\xedmo do ve\xedculo"}),Object(x.jsx)(o.bb,{className:"text-center",children:"Valor m\xe1ximo  do Ve\xedculo"}),Object(x.jsx)(o.bb,{className:"text-center",children:"Constante de Risco"}),Object(x.jsx)(o.bb,{className:"text-center",children:" Var\xedavel de exposi\xe7\xe3o "})]})}),Object(x.jsx)(o.Y,{children:c.map((function(e,t){return Object(x.jsxs)(o.cb,{children:[Object(x.jsx)(o.Z,{className:"valorMin",children:Object(x.jsxs)("p",{children:[" R$ ",e.to," "]})}),Object(x.jsx)(o.Z,{color:"secondary",className:"text-center",children:Object(x.jsxs)("p",{children:[" R$ ",e.until," "]})}),Object(x.jsx)(o.Z,{className:"text-center",children:Object(x.jsxs)("p",{children:[" ",e.kRisk," "]})}),Object(x.jsx)(o.Z,{color:"secondary",className:"text-center",children:Object(x.jsxs)("p",{children:[" ",e.exposition," "]})})]})}))})]}),Object(x.jsx)("br",{})]})})})}}}]);
//# sourceMappingURL=25.772ee540.chunk.js.map